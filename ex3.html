<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/html" xmlns="http://www.w3.org/1999/html">
<head>
    <title>ActorJS Example 3: Injecting Resources for Actors</title>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">

    <script src="examples/libs/jquery-lib.1.7.1.min.js"></script>
    <script src="lib/require.js"></script>
</head>
<body style="padding: 20px;">

<h1>ActorJS Example 3: Injecting Resources for Actors</h1>

<p>[ <a href="https://github.com/xeolabs/actorjs/wiki/Hello,-World!">Wiki page on this example</a> ]</p>

<h2><a href="" id="saySomething">Say something!</a></h2>

<script>

    jQuery(document).ready(
            function ($) {

                requirejs.config({
                    baseUrl:"."
                });

                /* Create an ActorJS instance
                 */
                require([
                    'lib/actorjs/actorjs'
                ],
                        function (actorjs) {

                            /* Tell ActorJS where to find actor types
                             */
                            actorjs.configure({
                                actorClassPath:"actors/"
                            });

                            /* Add an instance of our group actor
                             */
                            actorjs.call("addActor", {
                                type:"ex3/group",
                                actorId:"group",
                                myName:"Group"
                            });

                            /* Subscribe to the message the group actor will publish on behalf of either child
                             */
                            actorjs.subscribe("group/saidSomething",
                                    function (params) {
                                        alert("Actor group said " + params.message);
                                    });

                            /* Subscribe to the message the group actor's first child actor will publish
                             */
                            actorjs.subscribe("group/foo/saidSomething",
                                    function (params) {
                                        alert("Actor group/foo said " + params.message);
                                    });

                            /* Subscribe to the message its group actor's second child actor will publish
                             */
                            actorjs.subscribe("group/bar/saidSomething",
                                    function (params) {
                                        alert("Actor group/bar said " + params.message);
                                    });


                            /* When we click the button, call the group actor's 'saySomething' method, which
                             * calls that method in turn on both of its child actors
                             */
                            $("#saySomething").click(
                                    function () {
                                        actorjs.call("group/saySomething", {
                                            message:"Hello, World!"
                                        });
                                    });
                        });
            });
</script>
</body>
</html>